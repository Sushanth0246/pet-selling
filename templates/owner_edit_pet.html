{% extends 'base.html' %}
{% block content %}
<div class="form-container">
    <div class="form-header">
        <h2>Edit Pet Details</h2>
        <p>Update information for {{ pet.Name }}</p>
    </div>
    
    <form method="POST" enctype="multipart/form-data" class="pet-form">
        <div class="form-group">
            <label for="name">Pet Name *</label>
            <input type="text" id="name" name="name" value="{{ pet.Name or '' }}" required placeholder="e.g., Buddy">
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="type">Type *</label>
                <select id="type" name="type" required>
                    <option value="">Select Type</option>
                    <option value="Dog" {% if pet.Type == 'Dog' %}selected{% endif %}>Dog</option>
                    <option value="Cat" {% if pet.Type == 'Cat' %}selected{% endif %}>Cat</option>
                    <option value="Bird" {% if pet.Type == 'Bird' %}selected{% endif %}>Bird</option>
                    <option value="Other" {% if pet.Type == 'Other' %}selected{% endif %}>Other</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="breed">Breed</label>
                <input type="text" id="breed" name="breed" value="{{ pet.Breed or '' }}" placeholder="e.g., Golden Retriever">
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="age">Age (years) *</label>
                <input type="number" id="age" name="age" min="0" max="50" value="{{ pet.Age or 0 }}" required placeholder="e.g., 3">
            </div>
            
            <div class="form-group">
                <label for="gender">Gender *</label>
                <select id="gender" name="gender" required>
                    <option value="">Select Gender</option>
                    <option value="Male" {% if pet.Gender == 'Male' %}selected{% endif %}>Male</option>
                    <option value="Female" {% if pet.Gender == 'Female' %}selected{% endif %}>Female</option>
                    <option value="Unknown" {% if pet.Gender == 'Unknown' %}selected{% endif %}>Unknown</option>
                </select>
            </div>
        </div>
        
        <div class="form-group">
            <label for="price">Price ($) *</label>
            <input type="number" id="price" name="price" min="0" step="0.01" value="{{ pet.Price or 0 }}" required placeholder="e.g., 500.00">
        </div>
        
        <div class="form-group">
            <label for="description">Description</label>
            <textarea id="description" name="description" rows="4" placeholder="Tell us about your pet...">{{ pet.Description or '' }}</textarea>
        </div>
        
        <div class="form-group">
            <label for="image">Pet Image</label>
            <div class="image-upload">
                {% if pet.ImageURL %}
                <div class="current-image">
                    <p class="image-label">Current Image:</p>
                    <img src="{{ pet.ImageURL }}" alt="{{ pet.Name }}" class="current-pet-image">
                    <p class="image-info">Upload a new image to replace the current one</p>
                </div>
                {% endif %}
                <input type="file" id="image" name="image" accept="image/*" onchange="previewImage(event)">
                <div id="preview" class="image-preview"></div>
                <p class="file-hint">Accepted formats: PNG, JPG, JPEG, GIF, WebP (Max 5MB)</p>
            </div>
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Update Pet</button>
            <a href="{{ url_for('owner_dashboard') }}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>

<style>
    .form-container {
        max-width: 600px;
        margin: 30px auto;
        padding: 30px;
        background: white;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .form-header {
        text-align: center;
        margin-bottom: 30px;
    }

    .form-header h2 {
        color: #2c3e50;
        margin: 0;
        font-size: 2em;
    }

    .form-header p {
        color: #7f8c8d;
        margin: 10px 0 0 0;
    }

    .pet-form {
        display: flex;
        flex-direction: column;
        gap: 20px;
    }

    .form-group {
        display: flex;
        flex-direction: column;
    }

    .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
    }

    label {
        color: #2c3e50;
        font-weight: 600;
        margin-bottom: 8px;
    }

    input[type="text"],
    input[type="number"],
    input[type="email"],
    input[type="file"],
    select,
    textarea {
        padding: 10px 12px;
        border: 2px solid #ecf0f1;
        border-radius: 6px;
        font-size: 1em;
        transition: border-color 0.3s ease;
        font-family: inherit;
    }

    input[type="text"]:focus,
    input[type="number"]:focus,
    input[type="email"]:focus,
    input[type="file"]:focus,
    select:focus,
    textarea:focus {
        outline: none;
        border-color: #3498db;
        box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
    }

    textarea {
        resize: vertical;
        min-height: 100px;
    }

    .image-upload {
        border: 2px dashed #bdc3c7;
        border-radius: 8px;
        padding: 20px;
        text-align: center;
        transition: all 0.3s ease;
    }

    .image-upload:hover {
        border-color: #3498db;
        background-color: #ecf0f1;
    }

    .image-upload input[type="file"] {
        border: none;
        padding: 0;
        cursor: pointer;
        display: block;
        margin: 10px auto;
    }

    .current-image {
        margin-bottom: 20px;
        padding-bottom: 20px;
        border-bottom: 2px solid #ecf0f1;
    }

    .image-label {
        color: #2c3e50;
        font-weight: 600;
        margin: 0 0 10px 0;
    }

    .current-pet-image {
        max-width: 100%;
        max-height: 180px;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        margin-bottom: 10px;
    }

    .image-info {
        color: #7f8c8d;
        font-size: 0.85em;
        margin: 0;
    }

    .image-preview {
        margin-top: 15px;
        max-height: 200px;
    }

    .image-preview img {
        max-width: 100%;
        max-height: 200px;
        border-radius: 6px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .file-hint {
        color: #95a5a6;
        font-size: 0.85em;
        margin-top: 10px;
        margin-bottom: 0;
    }

    .form-actions {
        display: flex;
        gap: 10px;
        margin-top: 10px;
    }

    .btn {
        padding: 12px 24px;
        border: none;
        border-radius: 6px;
        font-size: 1em;
        font-weight: 600;
        cursor: pointer;
        text-decoration: none;
        transition: all 0.3s ease;
        flex: 1;
        text-align: center;
    }

    .btn-primary {
        background-color: #27ae60;
        color: white;
    }

    .btn-primary:hover {
        background-color: #229954;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(39, 174, 96, 0.3);
    }

    .btn-secondary {
        background-color: #95a5a6;
        color: white;
    }

    .btn-secondary:hover {
        background-color: #7f8c8d;
        transform: translateY(-2px);
    }

    @media (max-width: 600px) {
        .form-container {
            margin: 15px;
            padding: 20px;
        }

        .form-row {
            grid-template-columns: 1fr;
        }

        .form-actions {
            flex-direction: column;
        }

        .form-header h2 {
            font-size: 1.5em;
        }
    }
</style>

<script>
function previewImage(event) {
    const file = event.target.files[0];
    const preview = document.getElementById('preview');
    
    if (file && file.type.startsWith('image/')) {
        const reader = new FileReader();
        reader.onload = function(e) {
            preview.innerHTML = `<img src="${e.target.result}" alt="Preview">`;
        };
        reader.readAsDataURL(file);
    } else {
        preview.innerHTML = '';
    }
}
</script>
{% endblock %}
